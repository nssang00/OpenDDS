function createStyledLayer({ style, source }) {
  if (typeof style === 'function') {
    return new VectorTileLayer({
      source: source,
      style: style
    });
  } else {
    return new (class extends VectorTileLayer {
      createRenderer() {
        return new WebGLVectorTileLayerRenderer(this, {
          style: style
        });
      }
    })({
      source: source
    });
  }
}

function createStyledOlLayers(styleObj, layersObj) {
  return layersObj.map(layerObj => {
    if (layerObj.layers) {
      return new LayerGroup({
        layers: createStyledOlLayers(styleObj, layerObj.layers)
      });
    }

    const vectorTileSource = new VectorTileSource({
      format: new MVT(),
      url: layerObj.source
    });

    const layers = layerObj.rules.flatMap(rule =>
      rule.styleNames.map(styleName =>
        createStyledLayer({ style: styleObj[styleName], source: vectorTileSource })
      )
    );

    return layers.length === 1 ? layers[0] : new LayerGroup({ layers });
  });
}



const styleObj = {
  "BD130P01": function() { /* 스타일 함수 */ },
  "BD130P02": { /* 스타일 객체 */ }
};

const layersObj = [
  {
    "name": "암초",
    "source": "PBD130",
    "rules": [
      {
        "styleNames": ["BD130P01"],
        "filter": [
          "all",
          ["<=", ["resolution"], 611.49622628141],
          [">", ["resolution"], 152.8740565703525],
          ["in", ["get", "VRR"], [0, 1, 8]]
        ]
      },
      {
        "styleNames": ["BD130P02"],
        "filter": [
          "all",
          ["<=", ["resolution"], 611.49622628141],
          [">", ["resolution"], 152.8740565703525],
          ["in", ["get", "VRR"], [2, 4]]
        ]
      }
    ]
  }
];

// createStyledOlLayers 함수 내 styles 부분
const styles = layersObj[0].rules.flatMap(rule =>
  rule.styleNames.map(styleName => styleObj[styleName])
);

console.log(styles);
// [function() { /* 스타일 함수 */ }, { /* 스타일 객체 */ }]
